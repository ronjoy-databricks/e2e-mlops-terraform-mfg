{"format_version":"1.1","terraform_version":"1.2.7","variables":{"address_space":{"value":["10.10.0.0/21"]},"fw_subnet_id":{"value":""},"location":{"value":"southcentralus"},"nsg":{"value":{"private_nsg":{"name":"private_nsg"},"public_nsg":{"name":"public_nsg"}}},"org":{"value":"databricks"},"owner":{"value":"ron.joy@databricks.com"},"owner_custom":{"value":"ron"},"private_link_subnet":{"value":""},"purpose":{"value":"test"},"purpose_custom":{"value":"demo"},"rt_private_subnet":{"value":""},"rt_public_subnet":{"value":""},"subnets":{"value":{"subnet1":{"address_space":["10.10.1.0/26"],"name":"public_subnet","subnet_delegation":true},"subnet2":{"address_space":["10.10.1.64/26"],"name":"private_subnet","subnet_delegation":true},"subnet3":{"address_space":["10.10.1.128/26"],"name":"privatelink_subnet","subnet_delegation":false}}}},"planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.databricks.azurerm_databricks_workspace.adb","mode":"managed","type":"azurerm_databricks_workspace","name":"adb","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"custom_parameters":[{"machine_learning_workspace_id":null,"no_public_ip":true,"private_subnet_name":"private_subnet","public_subnet_name":"public_subnet"}],"customer_managed_key_enabled":false,"infrastructure_encryption_enabled":false,"load_balancer_backend_address_pool_id":null,"location":"southcentralus","managed_services_cmk_key_vault_key_id":null,"name":"adb-ron-demo","public_network_access_enabled":true,"resource_group_name":"rg-ron-demo","sku":"premium","tags":null,"timeouts":null},"sensitive_values":{"custom_parameters":[{}],"storage_account_identity":[]}},{"address":"module.databricks.data.azurerm_key_vault_secret.db-pw","mode":"data","type":"azurerm_key_vault_secret","name":"db-pw","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"db-password"},"sensitive_values":{"tags":{},"timeouts":{}}},{"address":"module.databricks.data.azurerm_key_vault_secret.db-un","mode":"data","type":"azurerm_key_vault_secret","name":"db-un","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"db-username"},"sensitive_values":{"tags":{},"timeouts":{}}},{"address":"module.databricks.data.databricks_current_user.me","mode":"data","type":"databricks_current_user","name":"me","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"sensitive_values":{}},{"address":"module.databricks.data.databricks_node_type.smallest","mode":"data","type":"databricks_node_type","name":"smallest","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"category":null,"gb_per_core":null,"graviton":null,"is_io_cache_enabled":null,"local_disk":true,"min_cores":null,"min_gpus":null,"min_memory_gb":null,"photon_driver_capable":null,"photon_worker_capable":null,"support_port_forwarding":null,"vcpu":null},"sensitive_values":{}},{"address":"module.databricks.data.databricks_spark_version.latest_lts","mode":"data","type":"databricks_spark_version","name":"latest_lts","provider_name":"registry.terraform.io/databricks/databricks","schema_version":0,"values":{"beta":null,"genomics":null,"gpu":null,"graviton":null,"latest":null,"long_term_support":true,"ml":null,"photon":null,"scala":null,"spark_version":null},"sensitive_values":{}},{"address":"module.databricks.databricks_cluster.shared_autoscaling","mode":"managed","type":"databricks_cluster","name":"shared_autoscaling","provider_name":"registry.terraform.io/databricks/databricks","schema_version":2,"values":{"apply_policy_default_values":null,"autoscale":[{"max_workers":2,"min_workers":1}],"autotermination_minutes":20,"aws_attributes":[],"azure_attributes":[],"cluster_log_conf":[],"cluster_name":"ron-demo-cluster","custom_tags":null,"data_security_mode":null,"docker_image":[],"gcp_attributes":[],"idempotency_token":null,"init_scripts":[],"instance_pool_id":null,"is_pinned":null,"library":[],"num_workers":0,"policy_id":null,"single_user_name":null,"spark_conf":null,"spark_env_vars":null,"ssh_public_keys":null,"timeouts":null,"workload_type":[]},"sensitive_values":{"autoscale":[{}],"aws_attributes":[],"azure_attributes":[],"cluster_log_conf":[],"default_tags":{},"docker_image":[],"gcp_attributes":[],"init_scripts":[],"library":[],"workload_type":[]}}],"address":"module.databricks"},{"resources":[{"address":"module.keyvault.azurerm_key_vault.adb_kv","mode":"managed","type":"azurerm_key_vault","name":"adb_kv","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"access_policy":[{"application_id":null,"certificate_permissions":null,"key_permissions":null,"object_id":"a63e9837-0d45-4eee-80ac-3f68f1ac8fa3","secret_permissions":["Get","List","Set"],"storage_permissions":null,"tenant_id":"9f37a392-f0ae-4280-9796-f1864a10effc"}],"contact":[],"enable_rbac_authorization":null,"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"southcentralus","name":"kv-ron-demo","public_network_access_enabled":true,"purge_protection_enabled":true,"resource_group_name":"rg-ron-demo","sku_name":"standard","soft_delete_retention_days":7,"tags":null,"tenant_id":"9f37a392-f0ae-4280-9796-f1864a10effc","timeouts":null},"sensitive_values":{"access_policy":[{"secret_permissions":[false,false,false]}],"contact":[],"network_acls":[]}},{"address":"module.keyvault.azurerm_private_dns_zone.kv-dns","mode":"managed","type":"azurerm_private_dns_zone","name":"kv-dns","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"privatelink.vaultcore.azure.net","resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"sensitive_values":{"soa_record":[]}},{"address":"module.keyvault.azurerm_private_dns_zone_virtual_network_link.db-dns-link","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"db-dns-link","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"db-dns-ron-demo-link","private_dns_zone_name":"privatelink.vaultcore.azure.net","registration_enabled":false,"resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"sensitive_values":{}},{"address":"module.keyvault.azurerm_private_endpoint.kv-pe","mode":"managed","type":"azurerm_private_endpoint","name":"kv-pe","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"southcentralus","name":"kv-ron-demo-pe","private_dns_zone_group":[{"name":"private-kv-dns-zone-group"}],"private_service_connection":[{"is_manual_connection":false,"name":"kv-pe-connection","private_connection_resource_alias":null,"request_message":null,"subresource_names":["vault"]}],"resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"sensitive_values":{"custom_dns_configs":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}}],"address":"module.keyvault"},{"resources":[{"address":"module.network.azurerm_network_security_group.nsg[\"private_nsg\"]","mode":"managed","type":"azurerm_network_security_group","name":"nsg","index":"private_nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"southcentralus","name":"private_nsg","resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"sensitive_values":{"security_rule":[]}},{"address":"module.network.azurerm_network_security_group.nsg[\"public_nsg\"]","mode":"managed","type":"azurerm_network_security_group","name":"nsg","index":"public_nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"southcentralus","name":"public_nsg","resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"sensitive_values":{"security_rule":[]}},{"address":"module.network.azurerm_subnet.subnet[\"subnet1\"]","mode":"managed","type":"azurerm_subnet","name":"subnet","index":"subnet1","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.10.1.0/26"],"delegation":[{"name":"adb_delegation","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"],"name":"Microsoft.Databricks/workspaces"}]}],"name":"public_subnet","resource_group_name":"rg-ron-demo","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"ron-demo-vnet"},"sensitive_values":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}]}},{"address":"module.network.azurerm_subnet.subnet[\"subnet2\"]","mode":"managed","type":"azurerm_subnet","name":"subnet","index":"subnet2","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.10.1.64/26"],"delegation":[{"name":"adb_delegation","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"],"name":"Microsoft.Databricks/workspaces"}]}],"name":"private_subnet","resource_group_name":"rg-ron-demo","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"ron-demo-vnet"},"sensitive_values":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}]}},{"address":"module.network.azurerm_subnet.subnet[\"subnet3\"]","mode":"managed","type":"azurerm_subnet","name":"subnet","index":"subnet3","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.10.1.128/26"],"delegation":[],"name":"privatelink_subnet","resource_group_name":"rg-ron-demo","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"ron-demo-vnet"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"module.network.azurerm_subnet_network_security_group_association.nsg_association[\"subnet1\"]","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"nsg_association","index":"subnet1","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.network.azurerm_subnet_network_security_group_association.nsg_association[\"subnet2\"]","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"nsg_association","index":"subnet2","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.network.azurerm_virtual_network.vnet","mode":"managed","type":"azurerm_virtual_network","name":"vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.10.0.0/21"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"flow_timeout_in_minutes":null,"location":"southcentralus","name":"ron-demo-vnet","resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"subnet":[]}}],"address":"module.network"},{"resources":[{"address":"module.rg.azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"southcentralus","name":"rg-ron-demo","tags":{"Client":"databricks","Owner":"ron.joy@databricks.com","Purpose":"test"},"timeouts":null},"sensitive_values":{"tags":{}}}],"address":"module.rg"}]}},"resource_changes":[{"address":"module.databricks.azurerm_databricks_workspace.adb","module_address":"module.databricks","mode":"managed","type":"azurerm_databricks_workspace","name":"adb","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"custom_parameters":[{"machine_learning_workspace_id":null,"no_public_ip":true,"private_subnet_name":"private_subnet","public_subnet_name":"public_subnet"}],"customer_managed_key_enabled":false,"infrastructure_encryption_enabled":false,"load_balancer_backend_address_pool_id":null,"location":"southcentralus","managed_services_cmk_key_vault_key_id":null,"name":"adb-ron-demo","public_network_access_enabled":true,"resource_group_name":"rg-ron-demo","sku":"premium","tags":null,"timeouts":null},"after_unknown":{"custom_parameters":[{"nat_gateway_name":true,"private_subnet_network_security_group_association_id":true,"public_ip_name":true,"public_subnet_network_security_group_association_id":true,"storage_account_name":true,"storage_account_sku_name":true,"virtual_network_id":true,"vnet_address_prefix":true}],"id":true,"managed_resource_group_id":true,"managed_resource_group_name":true,"network_security_group_rules_required":true,"storage_account_identity":true,"workspace_id":true,"workspace_url":true},"before_sensitive":false,"after_sensitive":{"custom_parameters":[{}],"storage_account_identity":[]}}},{"address":"module.databricks.data.azurerm_key_vault_secret.db-pw","module_address":"module.databricks","mode":"data","type":"azurerm_key_vault_secret","name":"db-pw","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["read"],"before":null,"after":{"name":"db-password"},"after_unknown":{"content_type":true,"id":true,"key_vault_id":true,"resource_id":true,"resource_versionless_id":true,"tags":true,"timeouts":true,"value":true,"version":true,"versionless_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"timeouts":{},"value":true}},"action_reason":"read_because_config_unknown"},{"address":"module.databricks.data.azurerm_key_vault_secret.db-un","module_address":"module.databricks","mode":"data","type":"azurerm_key_vault_secret","name":"db-un","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["read"],"before":null,"after":{"name":"db-username"},"after_unknown":{"content_type":true,"id":true,"key_vault_id":true,"resource_id":true,"resource_versionless_id":true,"tags":true,"timeouts":true,"value":true,"version":true,"versionless_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"timeouts":{},"value":true}},"action_reason":"read_because_config_unknown"},{"address":"module.databricks.data.databricks_current_user.me","module_address":"module.databricks","mode":"data","type":"databricks_current_user","name":"me","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["read"],"before":null,"after":{},"after_unknown":{"alphanumeric":true,"external_id":true,"home":true,"id":true,"repos":true,"user_name":true,"workspace_url":true},"before_sensitive":false,"after_sensitive":{}},"action_reason":"read_because_dependency_pending"},{"address":"module.databricks.data.databricks_node_type.smallest","module_address":"module.databricks","mode":"data","type":"databricks_node_type","name":"smallest","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["read"],"before":null,"after":{"category":null,"gb_per_core":null,"graviton":null,"is_io_cache_enabled":null,"local_disk":true,"min_cores":null,"min_gpus":null,"min_memory_gb":null,"photon_driver_capable":null,"photon_worker_capable":null,"support_port_forwarding":null,"vcpu":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}},"action_reason":"read_because_dependency_pending"},{"address":"module.databricks.data.databricks_spark_version.latest_lts","module_address":"module.databricks","mode":"data","type":"databricks_spark_version","name":"latest_lts","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["read"],"before":null,"after":{"beta":null,"genomics":null,"gpu":null,"graviton":null,"latest":null,"long_term_support":true,"ml":null,"photon":null,"scala":null,"spark_version":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}},"action_reason":"read_because_dependency_pending"},{"address":"module.databricks.databricks_cluster.shared_autoscaling","module_address":"module.databricks","mode":"managed","type":"databricks_cluster","name":"shared_autoscaling","provider_name":"registry.terraform.io/databricks/databricks","change":{"actions":["create"],"before":null,"after":{"apply_policy_default_values":null,"autoscale":[{"max_workers":2,"min_workers":1}],"autotermination_minutes":20,"aws_attributes":[],"azure_attributes":[],"cluster_log_conf":[],"cluster_name":"ron-demo-cluster","custom_tags":null,"data_security_mode":null,"docker_image":[],"gcp_attributes":[],"idempotency_token":null,"init_scripts":[],"instance_pool_id":null,"is_pinned":null,"library":[],"num_workers":0,"policy_id":null,"single_user_name":null,"spark_conf":null,"spark_env_vars":null,"ssh_public_keys":null,"timeouts":null,"workload_type":[]},"after_unknown":{"autoscale":[{}],"aws_attributes":[],"azure_attributes":[],"cluster_id":true,"cluster_log_conf":[],"default_tags":true,"docker_image":[],"driver_instance_pool_id":true,"driver_node_type_id":true,"enable_elastic_disk":true,"enable_local_disk_encryption":true,"gcp_attributes":[],"id":true,"init_scripts":[],"library":[],"node_type_id":true,"spark_version":true,"state":true,"url":true,"workload_type":[]},"before_sensitive":false,"after_sensitive":{"autoscale":[{}],"aws_attributes":[],"azure_attributes":[],"cluster_log_conf":[],"default_tags":{},"docker_image":[],"gcp_attributes":[],"init_scripts":[],"library":[],"workload_type":[]}}},{"address":"module.keyvault.azurerm_key_vault.adb_kv","module_address":"module.keyvault","mode":"managed","type":"azurerm_key_vault","name":"adb_kv","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access_policy":[{"application_id":null,"certificate_permissions":null,"key_permissions":null,"object_id":"a63e9837-0d45-4eee-80ac-3f68f1ac8fa3","secret_permissions":["Get","List","Set"],"storage_permissions":null,"tenant_id":"9f37a392-f0ae-4280-9796-f1864a10effc"}],"contact":[],"enable_rbac_authorization":null,"enabled_for_deployment":null,"enabled_for_disk_encryption":null,"enabled_for_template_deployment":null,"location":"southcentralus","name":"kv-ron-demo","public_network_access_enabled":true,"purge_protection_enabled":true,"resource_group_name":"rg-ron-demo","sku_name":"standard","soft_delete_retention_days":7,"tags":null,"tenant_id":"9f37a392-f0ae-4280-9796-f1864a10effc","timeouts":null},"after_unknown":{"access_policy":[{"secret_permissions":[false,false,false]}],"contact":[],"id":true,"network_acls":true,"vault_uri":true},"before_sensitive":false,"after_sensitive":{"access_policy":[{"secret_permissions":[false,false,false]}],"contact":[],"network_acls":[]}}},{"address":"module.keyvault.azurerm_private_dns_zone.kv-dns","module_address":"module.keyvault","mode":"managed","type":"azurerm_private_dns_zone","name":"kv-dns","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"privatelink.vaultcore.azure.net","resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"after_unknown":{"id":true,"max_number_of_record_sets":true,"max_number_of_virtual_network_links":true,"max_number_of_virtual_network_links_with_registration":true,"number_of_record_sets":true,"soa_record":true},"before_sensitive":false,"after_sensitive":{"soa_record":[]}}},{"address":"module.keyvault.azurerm_private_dns_zone_virtual_network_link.db-dns-link","module_address":"module.keyvault","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"db-dns-link","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"name":"db-dns-ron-demo-link","private_dns_zone_name":"privatelink.vaultcore.azure.net","registration_enabled":false,"resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"after_unknown":{"id":true,"virtual_network_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.keyvault.azurerm_private_endpoint.kv-pe","module_address":"module.keyvault","mode":"managed","type":"azurerm_private_endpoint","name":"kv-pe","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"southcentralus","name":"kv-ron-demo-pe","private_dns_zone_group":[{"name":"private-kv-dns-zone-group"}],"private_service_connection":[{"is_manual_connection":false,"name":"kv-pe-connection","private_connection_resource_alias":null,"request_message":null,"subresource_names":["vault"]}],"resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"after_unknown":{"custom_dns_configs":true,"id":true,"network_interface":true,"private_dns_zone_configs":true,"private_dns_zone_group":[{"id":true,"private_dns_zone_ids":true}],"private_service_connection":[{"private_connection_resource_id":true,"private_ip_address":true,"subresource_names":[false]}],"subnet_id":true},"before_sensitive":false,"after_sensitive":{"custom_dns_configs":[],"network_interface":[],"private_dns_zone_configs":[],"private_dns_zone_group":[{"private_dns_zone_ids":[]}],"private_service_connection":[{"subresource_names":[false]}]}}},{"address":"module.network.azurerm_network_security_group.nsg[\"private_nsg\"]","module_address":"module.network","mode":"managed","type":"azurerm_network_security_group","name":"nsg","index":"private_nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"southcentralus","name":"private_nsg","resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":true},"before_sensitive":false,"after_sensitive":{"security_rule":[]}}},{"address":"module.network.azurerm_network_security_group.nsg[\"public_nsg\"]","module_address":"module.network","mode":"managed","type":"azurerm_network_security_group","name":"nsg","index":"public_nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"southcentralus","name":"public_nsg","resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":true},"before_sensitive":false,"after_sensitive":{"security_rule":[]}}},{"address":"module.network.azurerm_subnet.subnet[\"subnet1\"]","module_address":"module.network","mode":"managed","type":"azurerm_subnet","name":"subnet","index":"subnet1","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.10.1.0/26"],"delegation":[{"name":"adb_delegation","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"],"name":"Microsoft.Databricks/workspaces"}]}],"name":"public_subnet","resource_group_name":"rg-ron-demo","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"ron-demo-vnet"},"after_unknown":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}]}}},{"address":"module.network.azurerm_subnet.subnet[\"subnet2\"]","module_address":"module.network","mode":"managed","type":"azurerm_subnet","name":"subnet","index":"subnet2","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.10.1.64/26"],"delegation":[{"name":"adb_delegation","service_delegation":[{"actions":["Microsoft.Network/virtualNetworks/subnets/join/action","Microsoft.Network/virtualNetworks/subnets/prepareNetworkPolicies/action","Microsoft.Network/virtualNetworks/subnets/unprepareNetworkPolicies/action"],"name":"Microsoft.Databricks/workspaces"}]}],"name":"private_subnet","resource_group_name":"rg-ron-demo","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"ron-demo-vnet"},"after_unknown":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[{"service_delegation":[{"actions":[false,false,false]}]}]}}},{"address":"module.network.azurerm_subnet.subnet[\"subnet3\"]","module_address":"module.network","mode":"managed","type":"azurerm_subnet","name":"subnet","index":"subnet3","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.10.1.128/26"],"delegation":[],"name":"privatelink_subnet","resource_group_name":"rg-ron-demo","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"ron-demo-vnet"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.network.azurerm_subnet_network_security_group_association.nsg_association[\"subnet1\"]","module_address":"module.network","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"nsg_association","index":"subnet1","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_security_group_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.azurerm_subnet_network_security_group_association.nsg_association[\"subnet2\"]","module_address":"module.network","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"nsg_association","index":"subnet2","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_security_group_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.network.azurerm_virtual_network.vnet","module_address":"module.network","mode":"managed","type":"azurerm_virtual_network","name":"vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.10.0.0/21"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"flow_timeout_in_minutes":null,"location":"southcentralus","name":"ron-demo-vnet","resource_group_name":"rg-ron-demo","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"guid":true,"id":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"subnet":[]}}},{"address":"module.rg.azurerm_resource_group.rg","module_address":"module.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"southcentralus","name":"rg-ron-demo","tags":{"Client":"databricks","Owner":"ron.joy@databricks.com","Purpose":"test"},"timeouts":null},"after_unknown":{"id":true,"tags":{}},"before_sensitive":false,"after_sensitive":{"tags":{}}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.2.7","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.keyvault.data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"04b07795-8ddb-461a-bbee-02f9e1bf7b46","id":"2022-09-06 16:34:56.697312 +0000 UTC","object_id":"a63e9837-0d45-4eee-80ac-3f68f1ac8fa3","subscription_id":"3f2e4d32-8e8d-46d6-82bc-5bb8d962328b","tenant_id":"9f37a392-f0ae-4280-9796-f1864a10effc","timeouts":null},"sensitive_values":{}}],"address":"module.keyvault"}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","version_constraint":"~\u003e 3.20.0","expressions":{"features":[{}]}},"module.databricks:databricks":{"name":"databricks","full_name":"registry.terraform.io/databricks/databricks","module_address":"module.databricks"}},"root_module":{"module_calls":{"databricks":{"source":"./modules/databricks","expressions":{"key_vault_id":{"references":["module.keyvault.kv_id","module.keyvault"]},"key_vault_uri":{"references":["module.keyvault.kv_uri","module.keyvault"]},"location":{"references":["var.location"]},"owner_custom":{"references":["var.owner_custom"]},"private_subnet_network_security_group_association_id":{"references":["module.network.private_nsg_association","module.network"]},"public_subnet_network_security_group_association_id":{"references":["module.network.public_nsg_association","module.network"]},"purpose_custom":{"references":["var.purpose_custom"]},"vnet_id":{"references":["module.network.vnet_id","module.network"]}},"module":{"outputs":{"adb_id":{"expression":{"references":["azurerm_databricks_workspace.adb.id","azurerm_databricks_workspace.adb"]}}},"resources":[{"address":"azurerm_databricks_workspace.adb","mode":"managed","type":"azurerm_databricks_workspace","name":"adb","provider_config_key":"azurerm","expressions":{"custom_parameters":[{"no_public_ip":{"constant_value":true},"private_subnet_name":{"constant_value":"private_subnet"},"private_subnet_network_security_group_association_id":{"references":["var.private_subnet_network_security_group_association_id"]},"public_subnet_name":{"constant_value":"public_subnet"},"public_subnet_network_security_group_association_id":{"references":["var.public_subnet_network_security_group_association_id"]},"virtual_network_id":{"references":["var.vnet_id"]}}],"location":{"references":["var.location"]},"name":{"references":["var.owner_custom","var.purpose_custom"]},"resource_group_name":{"references":["local.resource_group_name"]},"sku":{"constant_value":"premium"}},"schema_version":0},{"address":"databricks_cluster.shared_autoscaling","mode":"managed","type":"databricks_cluster","name":"shared_autoscaling","provider_config_key":"module.databricks:databricks","expressions":{"autoscale":[{"max_workers":{"constant_value":2},"min_workers":{"constant_value":1}}],"autotermination_minutes":{"constant_value":20},"cluster_name":{"references":["var.owner_custom","var.purpose_custom"]},"node_type_id":{"references":["data.databricks_node_type.smallest.id","data.databricks_node_type.smallest"]},"spark_conf":{"constant_value":{}},"spark_version":{"references":["data.databricks_spark_version.latest_lts.id","data.databricks_spark_version.latest_lts"]}},"schema_version":2},{"address":"data.azurerm_key_vault_secret.db-pw","mode":"data","type":"azurerm_key_vault_secret","name":"db-pw","provider_config_key":"azurerm","expressions":{"key_vault_id":{"references":["var.key_vault_id"]},"name":{"constant_value":"db-password"}},"schema_version":0},{"address":"data.azurerm_key_vault_secret.db-un","mode":"data","type":"azurerm_key_vault_secret","name":"db-un","provider_config_key":"azurerm","expressions":{"key_vault_id":{"references":["var.key_vault_id"]},"name":{"constant_value":"db-username"}},"schema_version":0},{"address":"data.databricks_current_user.me","mode":"data","type":"databricks_current_user","name":"me","provider_config_key":"module.databricks:databricks","schema_version":0},{"address":"data.databricks_node_type.smallest","mode":"data","type":"databricks_node_type","name":"smallest","provider_config_key":"module.databricks:databricks","expressions":{"local_disk":{"constant_value":true}},"schema_version":0},{"address":"data.databricks_spark_version.latest_lts","mode":"data","type":"databricks_spark_version","name":"latest_lts","provider_config_key":"module.databricks:databricks","expressions":{"long_term_support":{"constant_value":true}},"schema_version":0}],"variables":{"key_vault_id":{},"key_vault_uri":{},"location":{"description":"Location in which resource needs to be spinned up"},"owner_custom":{"description":"Short name of owner"},"private_subnet_network_security_group_association_id":{},"public_subnet_network_security_group_association_id":{},"purpose_custom":{"description":"Custom purpose"},"vnet_id":{"description":"VNET ID to be passed for ADB"}}},"depends_on":["module.network"]},"keyvault":{"source":"./modules/keyvault","expressions":{"location":{"references":["var.location"]},"owner_custom":{"references":["var.owner_custom"]},"private_link_subnet":{"references":["module.network.private_link_subnet","module.network"]},"purpose_custom":{"references":["var.purpose_custom"]},"vnet_id":{"references":["module.network.vnet_id","module.network"]}},"module":{"outputs":{"kv_id":{"expression":{"references":["azurerm_key_vault.adb_kv.id","azurerm_key_vault.adb_kv"]}},"kv_uri":{"expression":{"references":["azurerm_key_vault.adb_kv.vault_uri","azurerm_key_vault.adb_kv"]}}},"resources":[{"address":"azurerm_key_vault.adb_kv","mode":"managed","type":"azurerm_key_vault","name":"adb_kv","provider_config_key":"azurerm","expressions":{"access_policy":{"references":["data.azurerm_client_config.current.object_id","data.azurerm_client_config.current","data.azurerm_client_config.current.tenant_id","data.azurerm_client_config.current"]},"location":{"references":["var.location"]},"name":{"references":["var.owner_custom","var.purpose_custom"]},"purge_protection_enabled":{"constant_value":true},"resource_group_name":{"references":["local.resource_group_name"]},"sku_name":{"constant_value":"standard"},"soft_delete_retention_days":{"constant_value":7},"tenant_id":{"references":["data.azurerm_client_config.current.tenant_id","data.azurerm_client_config.current"]}},"schema_version":2},{"address":"azurerm_private_dns_zone.kv-dns","mode":"managed","type":"azurerm_private_dns_zone","name":"kv-dns","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"privatelink.vaultcore.azure.net"},"resource_group_name":{"references":["local.resource_group_name"]}},"schema_version":0},{"address":"azurerm_private_dns_zone_virtual_network_link.db-dns-link","mode":"managed","type":"azurerm_private_dns_zone_virtual_network_link","name":"db-dns-link","provider_config_key":"azurerm","expressions":{"name":{"references":["var.owner_custom","var.purpose_custom"]},"private_dns_zone_name":{"references":["azurerm_private_dns_zone.kv-dns.name","azurerm_private_dns_zone.kv-dns"]},"resource_group_name":{"references":["local.resource_group_name"]},"virtual_network_id":{"references":["var.vnet_id"]}},"schema_version":0},{"address":"azurerm_private_endpoint.kv-pe","mode":"managed","type":"azurerm_private_endpoint","name":"kv-pe","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.owner_custom","var.purpose_custom"]},"private_dns_zone_group":[{"name":{"constant_value":"private-kv-dns-zone-group"},"private_dns_zone_ids":{"references":["azurerm_private_dns_zone.kv-dns.id","azurerm_private_dns_zone.kv-dns"]}}],"private_service_connection":[{"is_manual_connection":{"constant_value":false},"name":{"constant_value":"kv-pe-connection"},"private_connection_resource_id":{"references":["azurerm_key_vault.adb_kv.id","azurerm_key_vault.adb_kv"]},"subresource_names":{"constant_value":["vault"]}}],"resource_group_name":{"references":["local.resource_group_name"]},"subnet_id":{"references":["var.private_link_subnet"]}},"schema_version":0},{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_config_key":"azurerm","schema_version":0}],"variables":{"location":{"description":"Location in which resource needs to be spinned up"},"owner_custom":{"description":"Short name of owner"},"private_link_subnet":{"description":"ID of Private link Subnet"},"purpose_custom":{"description":"Custom purpose"},"vnet_id":{"description":"Vnet ID for DNS integration"}}}},"network":{"source":"./modules/network","expressions":{"address_space":{"references":["var.address_space"]},"location":{"references":["var.location"]},"nsg":{"references":["var.nsg"]},"owner_custom":{"references":["var.owner_custom"]},"purpose_custom":{"references":["var.purpose_custom"]},"subnets":{"references":["var.subnets"]}},"module":{"outputs":{"nsg_id":{"expression":{"references":["azurerm_network_security_group.nsg"]}},"private_link_subnet":{"expression":{"references":["azurerm_subnet.subnet[\"subnet3\"].id","azurerm_subnet.subnet[\"subnet3\"]","azurerm_subnet.subnet"]}},"private_nsg_association":{"expression":{"references":["azurerm_subnet_network_security_group_association.nsg_association[\"subnet2\"].id","azurerm_subnet_network_security_group_association.nsg_association[\"subnet2\"]","azurerm_subnet_network_security_group_association.nsg_association"]}},"private_subnet_id":{"expression":{"references":["azurerm_subnet.subnet[\"subnet2\"].id","azurerm_subnet.subnet[\"subnet2\"]","azurerm_subnet.subnet"]}},"public_nsg_association":{"expression":{"references":["azurerm_subnet_network_security_group_association.nsg_association[\"subnet1\"].id","azurerm_subnet_network_security_group_association.nsg_association[\"subnet1\"]","azurerm_subnet_network_security_group_association.nsg_association"]}},"public_subnet_id":{"expression":{"references":["azurerm_subnet.subnet[\"subnet1\"].id","azurerm_subnet.subnet[\"subnet1\"]","azurerm_subnet.subnet"]}},"subnet_id":{"expression":{"references":["azurerm_subnet.subnet"]}},"vnet_id":{"expression":{"references":["azurerm_virtual_network.vnet.id","azurerm_virtual_network.vnet"]}}},"resources":[{"address":"azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["each.value[\"name\"]","each.value"]},"resource_group_name":{"references":["local.resource_group_name"]}},"schema_version":0,"for_each_expression":{"references":["var.nsg"]}},{"address":"azurerm_subnet.subnet","mode":"managed","type":"azurerm_subnet","name":"subnet","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["each.value[\"address_space\"]","each.value"]},"name":{"references":["each.value[\"name\"]","each.value"]},"resource_group_name":{"references":["local.resource_group_name"]},"virtual_network_name":{"references":["azurerm_virtual_network.vnet.name","azurerm_virtual_network.vnet"]}},"schema_version":0,"for_each_expression":{"references":["var.subnets"]}},{"address":"azurerm_subnet_network_security_group_association.nsg_association","mode":"managed","type":"azurerm_subnet_network_security_group_association","name":"nsg_association","provider_config_key":"azurerm","expressions":{"network_security_group_id":{"references":["each.value.nsg_id","each.value"]},"subnet_id":{"references":["each.value.subnet_id","each.value"]}},"schema_version":0,"for_each_expression":{"references":["local.subnet_nsgs","azurerm_subnet.subnet","azurerm_network_security_group.nsg"]}},{"address":"azurerm_virtual_network.vnet","mode":"managed","type":"azurerm_virtual_network","name":"vnet","provider_config_key":"azurerm","expressions":{"address_space":{"references":["var.address_space"]},"location":{"references":["var.location"]},"name":{"references":["var.owner_custom","var.purpose_custom"]},"resource_group_name":{"references":["local.resource_group_name"]}},"schema_version":0}],"variables":{"address_space":{"description":"VNET CIDR Range"},"location":{"description":"Location where resource is to be created"},"nsg":{"description":"A map of NSGs"},"owner_custom":{"description":"Short name of owner"},"purpose_custom":{"description":"Custom purpose"},"subnets":{"description":"A map to create multiple subnets"}}},"depends_on":["module.rg"]},"rg":{"source":"./modules/resource-group","expressions":{"location":{"references":["var.location"]},"org":{"references":["var.org"]},"owner":{"references":["var.owner"]},"owner_custom":{"references":["var.owner_custom"]},"purpose":{"references":["var.purpose"]},"purpose_custom":{"references":["var.purpose_custom"]}},"module":{"outputs":{"rg_id":{"expression":{"references":["azurerm_resource_group.rg.id","azurerm_resource_group.rg"]}}},"resources":[{"address":"azurerm_resource_group.rg","mode":"managed","type":"azurerm_resource_group","name":"rg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.owner_custom","var.purpose_custom"]},"tags":{"references":["var.owner","var.org","var.purpose"]}},"schema_version":0}],"variables":{"location":{"description":"Location in which resource needs to be spinned up"},"org":{"description":"Org name / Client name"},"owner":{"description":"Owner name of the resource"},"owner_custom":{"description":"Short name of owner"},"purpose":{"description":"Purpose of the resource"},"purpose_custom":{"description":"Custom purpose"}}}}},"variables":{"address_space":{"description":"VNET CIDR Range"},"fw_subnet_id":{"description":"ID of firewall Subnet"},"location":{"description":"Location in which resource needs to be spinned up"},"nsg":{"description":"A map of NSGs"},"org":{"description":"Org name / Client name"},"owner":{"description":"Owner name of the resource"},"owner_custom":{"description":"Short name of owner"},"private_link_subnet":{"description":"ID of Private link Subnet"},"purpose":{"description":"Purpose of the resource"},"purpose_custom":{"description":"Custom purpose"},"rt_private_subnet":{"description":"ID of private ADB subnet"},"rt_public_subnet":{"description":"ID of public ADB subnet"},"subnets":{"description":"A map to create multiple subnets"}}}},"relevant_attributes":[{"resource":"module.keyvault.azurerm_private_dns_zone.kv-dns","attribute":["id"]},{"resource":"module.keyvault.azurerm_key_vault.adb_kv","attribute":["id"]},{"resource":"module.network.azurerm_subnet_network_security_group_association.nsg_association[\"subnet1\"]","attribute":["id"]},{"resource":"module.databricks.azurerm_databricks_workspace.adb","attribute":["id"]},{"resource":"module.keyvault.data.azurerm_client_config.current","attribute":["tenant_id"]},{"resource":"module.keyvault.data.azurerm_client_config.current","attribute":["object_id"]},{"resource":"module.databricks.data.databricks_node_type.smallest","attribute":["id"]},{"resource":"module.rg.azurerm_resource_group.rg","attribute":["id"]},{"resource":"module.network.azurerm_network_security_group.nsg","attribute":[]},{"resource":"module.keyvault.azurerm_private_dns_zone.kv-dns","attribute":["name"]},{"resource":"module.network.azurerm_virtual_network.vnet","attribute":["name"]},{"resource":"module.keyvault.azurerm_key_vault.adb_kv","attribute":["vault_uri"]},{"resource":"module.network.azurerm_virtual_network.vnet","attribute":["id"]},{"resource":"module.network.azurerm_subnet.subnet[\"subnet2\"]","attribute":["id"]},{"resource":"module.databricks.data.databricks_spark_version.latest_lts","attribute":["id"]},{"resource":"module.network.azurerm_subnet.subnet[\"subnet3\"]","attribute":["id"]},{"resource":"module.network.azurerm_subnet.subnet","attribute":[]},{"resource":"module.network.azurerm_subnet.subnet[\"subnet1\"]","attribute":["id"]},{"resource":"module.network.azurerm_subnet_network_security_group_association.nsg_association[\"subnet2\"]","attribute":["id"]}]}
